{
    "environment": {
        "name": "augmentation test",
        "output_path": "getenv('OUTPUT_DIR')",
        "log_file": "logs.txt"
    },
    "data_collection": {
        "folder": "getenv('DATA_COLLECTION_DIR')",
        "collection_names": [
            "experiments_dataset_binary"
        ],
	"transform_folders" : ["original"],
        "include_overlapping_patches" : false,
        "test_images_folder": "../data/binarynew_test_images",
        "include_val_transforms": false,
        "min_road_percentage" : 0.00001, //Removes images with 16px road
	"validation_ratio" : 0.2,
	"include_val_transforms": false,
        "save_imgs": true,
        "augmentations": {
            "list": [
                {
                    "name": "ShiftScaleRotate",
                    "params": {
                        "p": 0.5
                    }
                }
            ],
            "use_train_statistics": false
        }

    },
    "training": {
        "general": {
            "batch_size": 8,
            "num_epochs": 200,
            "checkpoint_save_interval": 10,
            "num_workers": 8,
            "shuffle_data": true,
            "foreground_threshold": 0.5,
            "cropped_image_size": [
                400,
                400
            ],
            "submission_loss": false,
            "use_submission_masks": false,
            "stochastic_weight_averaging": {
                "on": false,
                "start_epoch": 40
            },
            "comet": {
                "log_to_comet": true,
                "tags": [
                    "official-exp-unet","retrain-binary","dilation","20210710-115820-unet_final_plus"
                ]
            }
        },
        "model": {
            "name": "unet",
            "in_channels" : 3,
            "out_channels" : 1,
            "features" : [
                64,
                128,
                256,
                512
            ],
            "filtersize": 3,
            "pool_kernelsize" : 2,
            "pool_stride" : 2,
            "stride" : 1,
            "dilation" : 5,
            "pool_padding": 0,
        },
        "loss_function": "dice_loss",
        "optimizer": {
            "name": "adam",
            "lr": 0.0001
        },
        "lr_scheduler": {
            "name": "multiStepLR",
            "multiStepLR": {
                "milestones": [
                    50,
                    100
                ],
                "gamma": 0.1
            }
        },
        "postprocessing": {
            "morphology": {
                "numdilate": 2,
                "numerode": 2,
                "nummedian": 1,
                "kernelsz": 4,
                "mediansz": 3
            }
        }
    },
    "inference": {
        "general": {
            "foreground_threshold": 0.25,
            "use_original_image_size": true,
            "enable_postprocessing": true
        },
        "postprocessing": {
            "morphology": {
                "numdilate": 2,
                "numerode": 2,
                "nummedian": 1,
                "kernelsz": 4,
                "mediansz": 3
            }
        }
    }
}
